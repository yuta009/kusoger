# 魔王とレオン：絆連鎖バトル（HTML/CSS/JavaScript版）完全仕様書

## 1. タイトル
**魔王とレオン：絆連鎖バトル**

---

## 2. ストーリー
平和な町を築き、子どもたちを育てていた魔王の国。  
しかし突如、女神が神聖兵器「ラームブリヤント」を携え、空から侵攻してきた。  
絶望的な光の奔流に対抗すべく、魔王は最強の戦士「レオン」と軍団を派遣。  

レオンは仲間たちと“絆”を繋ぎながら力を増幅させ、女神の機械兵団を打ち倒していく。  
女神の兵器を破壊し、再び魔界の平和を取り戻せ！

---

## 3. ジャンル
**絆連鎖アクション／リアルタイムバトルゲーム**

---

## 4. ゲーム概要
- **目的**：制限時間内（180秒）に最大6人の仲間と"手を繋ぎ"、絆エネルギーを最大化して女神兵器を撃破する。
- **特徴**：  
  - フィールド上に現れる仲間キャラに接近（150px以内）で自動的に"手を繋ぐ（リンク）"。  
  - 仲間の数が多いほど、攻撃力と防御力が上昇。各仲間には異なる特殊能力がある。  
  - 敵弾に当たったり、距離が350px以上離れると絆が切れる。  
  - 難易度選択：NORMAL（標準）とHARD（高難易度）から選択可能。
- **対応プラットフォーム**：Webブラウザ（HTML/CSS/JavaScript）  
- **想定プレイ時間**：3分（180秒制限）  

---

## 5. ゲームの流れ
| フェーズ | 内容 |
|-----------|------|
| タイトル画面 | 難易度選択（NORMAL/HARD）・操作説明・遊び方表示 |
| バトル開始 | レオン登場、カウント開始（180秒）、BGM再生 |
| 仲間探索 | 仲間に150px以内で接近すると自動リンク。絆ゲージ上昇（最大6人）。 |
| 敵出現 | 女神兵器ラームブリヤント出現。ビーム攻撃を回避。 |
| フェイズ変化 | HP 60%以下でPhase 2、30%以下でPhase 3（攻撃が激化）。 |
| クライマックス | 残り30秒で警告表示。HARDモードでは必殺技使用可能。 |
| 結果画面 | スコア・残り時間・絆数・絆ゲージ表示。 |

---

## 6. 勝敗条件
- **勝利**：ボス（女神兵器）のHPを0にする。絆ゲージ100%（6人全員リンク）で敵撃破が推奨。  
- **敗北**：プレイヤーのHPが0になる、または制限時間（180秒）切れ。

---

## 7. 操作方法
| デバイス | 操作 | 内容 |
|-----------|------|------|
| PC | ← → ↑ ↓キー または WASD | レオン移動 |
| PC | スペースキー | 絆開放攻撃（リンクしている仲間からボスへビーム発射、最大3本） |
| PC | Aキー | 必殺技：全弾幕破壊（HARDモードのみ、6人全員リンク時のみ使用可能、使用回数3回） |

---

## 8. キャラクター
| 名称 | 種別 | 特徴 |
|------|------|------|
| レオン | プレイヤー | 絆の中心。リンク数に応じて能力が強化される。HP 100。 |
| 仲間（6種類） | NPC | 150px以内で自動リンク。各タイプごとに異なる特殊能力を持つ。 |
| 女神兵器ラームブリヤント | ボス | NORMAL: HP 20000、HARD: HP 160000。3フェイズで攻撃パターンが変化。 |

---

## 9. 絆システム
- **リンク距離**：150px以内で自動リンク  
- **切断距離**：350px以上離れると切断（ヒステリシス機能付き）  
- **最大人数**：6人  
- **リンク効果**：
  - 3人以上リンク：防御力+30%、毎秒3HP回復
  - 6人全員リンク：防御力+50%、毎秒5HP回復
- **仲間の特殊能力**（リンク時に発動）：
  - Warrior（戦士）：攻撃力+20%
  - Healer（治癒士）：毎秒2HP回復（3人以上で強化）
  - Tank（タンク）：防御力+15%（3人以上で強化）
  - Speed（スピード）：移動速度+30%
  - Mage（魔導士）：絆開放攻撃の間隔短縮（仲間数に応じて最大0.1秒まで短縮）
  - Guard（守護者）：ダメージ20%軽減
- **断絶条件**：敵弾命中でランダムに1人切断（2秒クールダウン）、または距離超過  
- **再接触**：クールダウン後、再リンク可能
- **絆開放攻撃**：スペースキーで発動。リンクしている仲間からボスへ最大3本のビームを発射。攻撃力はリンク数に応じて増加（1人あたり+10%）。  

---

## 10. 難易度とボスフェイズ
| 難易度 | ボスHP | 特徴 |
|-----------|--------|------|
| NORMAL | 20,000 | 標準的な難易度。必殺技なし。 |
| HARD | 160,000 | 高難易度。6人全員リンク時に必殺技（全弾幕破壊）使用可能（使用回数3回）。 |

| フェイズ | HP条件 | 攻撃パターン |
|-----------|--------|-------------|
| Phase 1 | 60%以上 | 基本的な攻撃（直線ビーム、3方向拡散、5方向拡散、円形放射） |
| Phase 2 | 30%〜60% | より激しい攻撃（5方向拡散、8方向放射、2段階拡散、回転円形放射） |
| Phase 3 | 30%以下 | 最激しい攻撃（全方位12方向、プレイヤー狙い+拡散、16方向全方位、複合攻撃） |

攻撃頻度は時間経過とHP減少に応じて徐々に上がる（最小0.25秒間隔）。

---

## 11. 画面構成
```
┌────────────────────────────────────────────┐
│ SCORE: 000000  BOND: 0/6  HP: 100/100  3:00 │
│ ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ │
│ 必殺技: 3/3 (Aキー) [HARDモードのみ]         │
├────────────────────────────────────────────┤
│                                             │
│        フィールド（移動・戦闘・リンク）        │
│        プレイヤー（レオン）・仲間・ボス        │
│        絆の光線でリンク状態を表示             │
│                                             │
├────────────────────────────────────────────┤
│ [タイトル画面] 難易度選択・遊び方表示          │
│ [結果画面] スコア・残り時間・絆数表示         │
└────────────────────────────────────────────┘
```

画面サイズに応じて自動的にスケール調整（アスペクト比維持、最大1200×800px）。

---

## 12. 画像素材仕様

| 用途 | 内容 | サイズ | スタイル | 形式 |
|------|------|---------|----------|------|
| プレイヤー | レオン | 64x64 | ドット調 | PNG |
| 仲間 | 6種類（Warrior, Healer, Tank, Speed, Mage, Guard） | 48x48 | ミニキャラ | PNG |
| 仲間状態 | 通常・リンク・ダメージ（各3状態） | 48x48 | ミニキャラ | PNG |
| 敵 | ラームブリヤント | 200x200 | 機械神風 | PNG |
| 背景 | 戦場背景 | 1200x800 | 2D背景 | PNG |
| UI | フレーム（Frame1, Frame2） | 可変 | フラット | PNG |
| ロゴ | タイトルロゴ | 可変 | 炎＋光輪 | PNG |
| エフェクト | 絆リンク・ダメージ・爆発 | 可変 | Canvas描画/PNG | PNG |
| ビーム | 直線・拡散・追尾ビーム | 可変 | Canvas描画 | - |

---

## 13. 音楽・効果音仕様

### BGM
| No | 用途 | 曲調 | 長さ | 備考 |
|----|------|------|------|------|
| 01 | バトル | 疾走・ギター | 可変 | ループ（ゲーム中再生） |

**実装状況**：`music/絆の刃.mp3`を使用。ゲーム中はループ再生。結果画面では停止。

### 効果音
現在は実装されていませんが、将来的に追加可能：
| No | 用途 | 内容 |
|----|------|------|
| SE01 | リンク成立 | 透明感のあるチリン音 |
| SE02 | 絆開放攻撃 | 爆発＋閃光 |
| SE03 | 被弾 | 衝撃音 |
| SE04 | 勝利 | ファンファーレ |
| SE05 | 敗北 | 不協和音 |

---

## 14. 技術仕様
- **レンダリング**：Canvas 2D API + requestAnimationFrame（60fps）
- **スプライト**：PNG画像を個別に読み込み
- **衝突判定**：円形距離判定（プレイヤー・仲間：20px、弾：20px）
- **音**：HTML5 Audio API使用（`new Audio()`）
- **画面サイズ**：レスポンシブ対応（基準1200×800px、画面サイズに応じて自動スケール）
- **座標系**：基準サイズ（1200×800）で計算し、描画時にスケール適用
- **アセット管理**：AssetLoaderクラスで画像を非同期読み込み

---

## 15. フォルダ構成
```
/
 ├── maou-leon-bond-battle.html (メインゲームファイル)
 ├── picture/
 │    ├── leon_player.png (プレイヤー)
 │    ├── sol1_nom.png, sol1_link.png, sol1_dam.png (Warrior)
 │    ├── sol2_nom.png, sol2_link.png, sol2_dam.png (Healer)
 │    ├── sol3_nom.png, sol3_link.png, sol3_dam.png (Tank)
 │    ├── sol4_nom.png, sol4_link.png, sol4_dam.png (Speed)
 │    ├── sol5_nom.png, sol5_link.png, sol5_dam.png (Mage)
 │    ├── sol6_nom.png, sol6_link.png, sol6_dam.png (Guard)
 │    ├── enemy.png (ボス)
 │    ├── background.png (背景)
 │    ├── title_logo.png (タイトルロゴ)
 │    ├── Frame1.png, Frame2.png (UIフレーム)
 │    ├── Bond_Effect_link.png, Bond_Effect_dam.png (絆エフェクト)
 │    ├── Straight_beam.png, Spread_beam.png, Homing_beam.png (ビーム画像、現在はCanvas描画)
 │    └── explosion.png (爆発エフェクト、現在はCanvas描画)
 └── music/
      └── 絆の刃.mp3 (バトルBGM)
```

---

## 16. ゲームの魅力
- 絆連鎖による集団バトルの爽快感  
- 絆が切れる緊張感と再連結の達成感  
- 美しい光線エフェクトと聖 vs 魔の演出対比  
- 3分で遊べるテンポの良さと戦略性

## 17. 成長・強化要素
- **リンク数による強化**：
  - 3人以上リンク：防御力+30%、毎秒3HP回復
  - 6人全員リンク：防御力+50%、毎秒5HP回復
- **仲間の特性**（リンク時に発動）：
  - Warrior：攻撃力+20%
  - Healer：毎秒2HP回復（3人以上で強化）
  - Tank：防御力+15%（3人以上で強化）
  - Speed：移動速度+30%
  - Mage：絆開放攻撃の間隔短縮（仲間数に応じて最大0.1秒まで短縮）
  - Guard：ダメージ20%軽減
- **絆開放攻撃**：リンク数に応じて攻撃力が増加（1人あたり+10%）
- **必殺技**（HARDモードのみ）：6人全員リンク時に全弾幕破壊（使用回数3回）

## 18. 画像素材一覧（実装済み）

| No  | 用途                | 内容詳細                 | 実装サイズ(px)       | 実装形式            |
| --- | ----------------- | -------------------- | --------------- | --------------- |
| 1   | プレイヤーキャラ          | 主人公レオン             | 64x64           | PNG（透過）         |
| 2   | 仲間キャラ（6種類）        | Warrior, Healer, Tank, Speed, Mage, Guard | 48x48           | PNG（透過、3状態：通常/リンク/ダメージ） |
| 3   | 絆エフェクト（リンクライン）    | レオンと仲間を繋ぐ光線          | Canvas描画      | グラデーション光線（中心白→端に薄紫）          |
| 4   | 敵キャラ：女神兵器ラームブリヤント | 機械と神聖要素を融合した巨大兵器     | 200x200         | PNG（透過）         |
| 5   | 敵弾（ビーム・弾幕）        | 女神兵器の攻撃エフェクト         | Canvas描画      | 直線ビーム・拡散ビーム・追尾ビーム（Canvas描画）    |
| 6   | 爆発エフェクト           | 敵破壊・リンク開放時           | Canvas描画      | 火花＋光輪（Canvas描画）               |
| 7   | 背景（戦場）            | 魔王城前〜天空決戦フィールド       | 1200x800         | PNG（固定背景）         |
| 8   | UIフレーム            | スコア・残り時間・絆ゲージなどのUIバー | 可変            | PNG（Frame1, Frame2）      |
| 9   | 絆ゲージバー            | 上部に表示される絆レベルゲージ      | CSS描画     | グラデーション（青→桃→金）               |
| 10  | ボタンUI             | START／RETRY／タイトルへ   | CSS描画          | CSSグラデーション＋ホバーエフェクト           |
| 11  | タイトルロゴ            | 「魔王とレオン：絆連鎖バトル」      | 可変         | PNG（透過）         |
| 12  | リザルト背景            | 戦闘結果表示用              | CSS描画         | 半透明背景＋CSS         |
| 13  | 絆エフェクト画像          | リンク成立・ダメージエフェクト         | 可変         | PNG（Bond_Effect_link, Bond_Effect_dam）     |
| 14  | HPゲージ／敵HPバー       | 女神兵器の体力バー            | Canvas描画     | Canvas描画（幅400、高さ20）               |
| 15  | 必殺技エフェクト          | 全弾幕破壊時の画面エフェクト       | Canvas描画         | 画面全体に爆発エフェクト（20個）        |

---

## 19. カラーパレット推奨

| 目的 | 色 |
|------|----|
| 魔界・背景 | #221133, #553377 |
| 絆光 | #C5A9FF, #FFE7FF |
| 女神兵器 | #E8EFFF, #FAD962 |
| UI・バー | #A088FF, #5544DD |

---

## 20. アニメーション仕様

| 要素 | フレーム数 | ループ | 備考 |
|------|-------------|--------|------|
| レオン歩行 | 4 | ループ | 移動速度に応じて切替 |
| 仲間リンク光 | 3 | ループ | alpha値0.5→1.0往復 |
| 爆発 | 6 | 一度再生 | フレーム間隔0.05秒 |
| 女神兵器攻撃 | 5 | 一度再生 | チャージ→発射 |
| 絆開放攻撃 | 動的描画 | - | 線拡大＋エフェクト光球 |

---

## 21. 音楽素材一覧（BGM / SE）

### BGM
| No | 用途 | 内容 | 曲調・雰囲気 | 推奨長さ | 備考 |
|----|------|------|----------------|------------|------|
| BGM-01 | タイトル画面 | ゲーム導入曲 | 壮大・静かな鐘音＋オーケストラ導入 | 約60秒 | ループ推奨 |
| BGM-02 | ステージ通常戦 | 戦闘BGM1 | 疾走感のあるドラム＋シンセ＋ギター | 約120秒 | ループ |
| BGM-03 | クライマックス戦 | 女神兵器フェイズ3 | 聖歌風クワイア＋重低音ドラム＋弦楽 | 約90秒 | 非ループ |
| BGM-04 | リザルト | 絆の勝利テーマ | ピアノ＋ハープ＋希望的メロディ | 約45秒 | 一度再生 |
| BGM-05 | ゲームオーバー | 絶望の静寂 | ピアノの単音＋残響 | 約30秒 | 一度再生 |

### 効果音(SE)
| No | 用途 | 内容 | 備考 |
|----|------|------|------|
| SE-01 | ボタン押下 | UIクリック音 | 軽い電子音 |
| SE-02 | 仲間リンク成立 | チリン♪（ガラス音系） | 複数重ね可 |
| SE-03 | 絆開放攻撃 | 爆発＋閃光音 | 音圧高め |
| SE-04 | 被弾 | 短い衝撃音 | ダメージ時 |
| SE-05 | 絆切断 | 弦の切れるような音 | リンク消失時 |
| SE-06 | 敵撃破 | ドン＋キラ音 | コンボ時強化 |
| SE-07 | 時間警告 | ピピピ音 | 残り30秒時点 |
| SE-08 | 勝利 | ファンファーレ | メジャーコード |
| SE-09 | 敗北 | 不協和ピアノ | 徐々に減衰 |

---

## 22. サウンド設定例（JavaScript）

```js
const bgm = new Audio('audio/bgm_stage.ogg');
bgm.loop = true;
bgm.volume = 0.5;
bgm.play();
```

---

## 23. 効果演出（視覚＋音の同期）

| シーン | 視覚演出 | 音演出 |
|--------|-----------|---------|
| 絆リンク成立 | 線が発光し、中心から波紋 | SE-02（チリン♪） |
| 絆開放攻撃 | 全員が光を放つ→大爆発 | SE-03＋画面白フラッシュ |
| 女神兵器登場 | 画面振動＋光の柱 | BGM切替→BGM-03再生 |
| 残り30秒 | 画面赤点滅＋時計音 | SE-07（ピピピ） |
| 勝利時 | 絆ゲージが金色に変化 | SE-08＋BGM-04 |
| 敗北時 | 背景が黒化→雷閃光 | SE-09＋フェードアウト |

---

## 24. ゲームの面白さ
連鎖の緊張感：リンクが切れる寸前のスリル
集団戦の爽快感：仲間を増やすほど攻撃が派手に
戦略性：仲間の順序・タイプ・距離管理が勝敗を分ける
演出：光の絆線・女神兵器の巨大エフェクトで達成感





---

© 2025 魔王と女神の生存戦争ゲームプロジェクト
