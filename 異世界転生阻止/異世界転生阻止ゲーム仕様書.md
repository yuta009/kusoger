# 異世界転生阻止ゲーム 仕様書（HTML/CSS/JavaScript版）

・https://chatgpt.com/share/68cff199-f57c-8013-a97d-46babef7a895

## ストーリー
50代男性・佐藤武志は会社帰りに車に引かれ命を落とした。光に包まれた彼の魂は、異世界に転生し魔王を倒す英雄として生まれ変わる運命にあった。しかし、未来の敗北を知る魔王は時空干渉魔法を発動し、過去へ干渉して佐藤の転生を阻止する作戦を開始した。プレイヤーは魔王となり、魂がポータルへ到達するのを防ぐ。

## ゲーム概要
* ジャンル：タワーディフェンス風 防衛ゲーム
* 目的：主人公の魂をポータルに到達させない
* プラットフォーム：Webブラウザ（HTML/CSS/JavaScript）
* 表現：DOM要素とCSSアニメーションのみで実装（Canvas API不使用）

## フィールド構成
* **画面構造**：
  * 上部：ステータスバー（魔力、ポータル耐久、ウェーブ）
  * 中央：ルートエリア（敵が進む道）
  * 下部：罠選択パネル
* **ルート**：
  * 蛇行ルート：左上→中央→右下→右端ポータル
  * 分岐ルート：中央で上下に分岐しランダム進行
* HTML内に`<div class="path">`を配置し、CSS GridやFlexで道を表現

## 敵の移動仕様
* 敵（ソウル）は左端から出現し、道のチェックポイントを順番に通過
* `position:absolute`の`div`をJavaScriptで座標更新して移動
* 分岐点では`Math.random()`でルートをランダム選択
* ポータル到達時にポータル耐久が減少

## 操作方法
| 操作 | 内容 |
|------|------|
| クリック | 下部パネルから罠を選び、ルート上に設置 |
| スペースキー | 次のウェーブ開始 |

## リソース
* **魔力(Mana)**：罠設置やアップグレードに使用。敵撃破で回復
* **ポータル耐久**：敵が到達すると減少。0で敗北

## 罠の種類
| 罠 | コスト | 効果 |
|----|-------|------|
| 遅延フィールド | 30 | そのマスに入った敵の速度を一時的に半減 |
| スパイク罠     | 20 | 定期的に敵へ小ダメージ |
| 爆発罠         | 50 | 一定時間後に範囲ダメージ |

## 敵キャラクター
| 名称 | HP | 速度(px/sec) | 特徴 |
|------|----|-------------|------|
| 弱いソウル | 5 | 60 | 初期ウェーブ専用 |
| 通常ソウル | 12 | 45 | 標準的 |
| 時間歪曲ソウル | 25 | 90 | 高速・耐久高 |

## ウェーブ構成
* 全10ウェーブ
* ウェーブが進むと敵数・種類・速度が増加
* 中盤以降は分岐ルートが追加され、罠の配置が複雑化

## 勝敗条件
* **勝利**：全ウェーブ防衛成功
* **敗北**：ポータル耐久0、または敵の規定数が到達

## 技術仕様
* HTML：ルート、罠、敵、UIを`div`で構築
* CSS：`transition`/`animation`で移動やエフェクトを表現
* JavaScript：タイマー制御、敵スポーン、移動、HP計算、罠効果処理、リソース管理、UI更新

## このゲームの
面白さ
* **戦略性**：罠の設置場所やタイミング、コスト配分が勝敗を左右
* **緊張感**：ウェーブ後半は高速敵が増え、判断力が試される
* **ストーリー性**：魔王の立場で未来を変える戦いを体験
* **成長感**：ウェーブ進行で罠アップグレードや新要素が解放

## 実装ポイント
* Canvas API禁止：DOM要素＋CSSアニメーションのみで表現
* レスポンシブ対応：スマホでも操作しやすいUIレイアウト
* セーブ機能：localStorageで最高ウェーブ記録を保存
