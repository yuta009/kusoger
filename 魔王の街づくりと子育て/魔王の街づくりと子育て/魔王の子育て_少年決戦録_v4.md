# 魔王の子育て：少年決戦録（シンプル版仕様書 v4）

---
## 0. ドキュメント概要
- 目的：少年一人のカードバトルを主軸とした、短時間プレイ可能なブラウザ向け育成RPG。
- プラットフォーム：Webブラウザ（HTML / CSS / JavaScript）
- 対象年齢：10〜30代
- 想定プレイ時間：1セッション 3〜10分
- ゲームジャンル：**ターン制カードバトル × 少年育成**
- 保存機能：なし（敗北時にリセット）

---
# 1. ゲームタイトル
**魔王の街づくりと子育て — 少年決戦録**

---
# 2. ストーリー
 異世界転生を阻止した魔王は、軍事力拡大のため、魔王の街づくりを再開した。そんな時、ある一人の人間の少年を拾う。
 勇者はまた生まれてくる可能性がある。その対抗策として魔王は街づくりの傍ら子育てを開始した。
 その子供の為に魔力を結晶化しカードに変え、本来では勝てない敵とバトルし勝つことによって、強制的に強くしていくのであった。

## 2.1 エンディング（勇者アルト撃破時）
少年は幾多の戦いを越え、ついに章ボス「勇者アルト」を打ち倒す。<br>
その瞬間、魔王が結晶化した魔力のカードは静かに輝きを収め、街を覆っていた不穏な気配は霧のように消えた。<br>
魔王は短く告げる——「これで、しばらくは勇者は生まれまい」。<br><br>
少年はまだ小さく、道半ばだ。だが自らの意志で立ち、選ぶ力を得た。<br>
魔王は街づくりへと再び歩みを進め、少年は次なる成長の旅へ。<br>
そしてカードは街の守りとして散り、いずれ訪れる“次の章”のために眠りにつく。<br><br>
—— 少年決戦録・第一章 完。

## 2.2 出現ストーリー（勇者アルト戦開始時）
以下はゲーム内表示用の短文（HTMLの`<br>`改行込み）。

「城門が開く音」とともに、白金の甲冑を纏った青年が光の剣を掲げて現れた。<br>
名は——勇者アルト。世界の修復を担う者。<br>
彼の視線は一瞬だけ少年に揺らぎ、しかし刃は迷わない。<br>
魔王は短く命じ、少年はカードを握る。<br>
「ここからが、お前の“選択”だ」。光と闇の決戦が始まる。

---
# 3. ゲームの目的と勝敗条件

## 3.1 目的
- 少年を育成し、強敵（CPU）とのカードバトルで勝利を重ねる。
- 各敵を倒して「章ボス」を撃破すると、新しいカードと成長ボーナスを獲得。

## 3.2 勝敗条件
- **勝利条件**：敵のHPを0にする、または最終ターンで少年のHPが上回る。
- **敗北条件**：少年のHPが0になる、または最終ターンで敵HPが上回る。
- **敗北時**：少年が死んでしまったため、ゲームが最初のスタート（タイトル画面）にリセットされる。

---
# 4. ゲーム構成と流れ

1. **タイトル画面**
   - 「はじめる」ボタンでゲーム開始

2. **拠点画面（簡易メニュー）**
   - 「デッキ編集」：カード10枚を編成。
   - 「訓練」：雑魚敵と戦ってEXPだけを獲得（カード追加なし、HP回復なし）【スコア-5消費】
   - 「鍛錬」：EXP -2 消費で STR または INT のどちらかを選んで +1 成長【スコア-3/回 消費】
   - 「出撃」：CPUとのバトルに移行（ストーリー進行、勝利数に応じて敵が変化）

3. **バトル画面**
   - 少年 vs CPU の1対1カードバトル。
   - 手札：最大5枚。毎ターン1枚のみ使用可能。
   - 次のターン：1ターンごとに新しい5枚を再ドロー（シャッフル）
   - 10ターン制。
   - ターン終了時：DEFバフリセット、敵のターンが自動実行
   - カードを使用したら自動的に敵のターンに移行
   - 勇者アルト戦開始時：出現ストーリー（2.2）を表示

4. **リザルト画面**
   - **通常バトル勝利**：EXP獲得、カード追加、レベルアップ判定、拠点へ戻る
   - スコア加算：ベース+各種ボーナス（7.5）を加算し、獲得スコアを表示
   - **訓練バトル勝利**：EXP獲得のみ（カード追加なし、HP回復なし）、拠点へ戻る
   - **敗北（全バトル共通）**：少年が死んでしまったため、ゲームが最初のスタート（タイトル画面）にリセット
   - モーダル表示で結果確認後、自動で遷移
   - **章ボス撃破（勇者アルト）**：エンディング表示（2.1）→ タイトル画面へ戻る（保存なし）

---
# 5. 操作方法

| 操作     | PC     | スマホ   |
| ------ | ------ | ----- |
| メニュー操作 | クリック   | タップ   |
| カード選択  | クリック   | タップ   |
| カード詳細  | ホバー    | 長押し   |
| カード使用  | クリック   | タップ   |

---
# 6. 少年システム（育成要素）

| パラメータ | 説明              | 成長例      |
| ----- | --------------- | -------- |
| HP    | 体力              | +10 / Lv |
| ATK   | 攻撃力             | +2 / Lv  |
| DEF   | 防御力             | +1 / Lv  |
| STR   | 物理攻撃補正          | +1 / 鍛錬（EXP-2消費、STR/INT選択）、物理攻撃カード使用時にダメージ増加 |
| INT   | 魔法攻撃補正          | +1 / 鍛錬（EXP-2消費、STR/INT選択）、魔法攻撃カード使用時にダメージ増加 |

## 6.1 初期ステータス
- **LV**: 1
- **EXP**: 0 / 50
- **HP**: 100 / 100
- **ATK**: 10
- **DEF**: 2
- **STR**: 5
- **INT**: 3

- **LVアップ**：EXPが次のレベルに必要な値に到達した時に自動成長。
  - レベルアップ条件：`必要EXP = 現在のLV × 50`（例：LV1→2は50、LV2→3は100）
  - レベルアップ時の成長：HP+10、ATK+2、DEF+1
- **訓練**：雑魚敵（弱い敵）と戦ってEXPだけを獲得するモード。勝利してもカード追加やHP回復はなし。
  - 雑魚敵：HP40、ATK5、DEF1、EXP15
- **鍛錬**：EXP -2 消費で STR または INT のどちらかを選んで +1 成長。モーダルを閉じずに連続で強化可能（EXPが残っている限り）。

---
# 7. カードバトル（メインシステム）

## 7.1 基本ルール
- 手札：最大5枚。
- デッキ：10枚固定。
- ターン制：プレイヤー → CPU。
- 最大10ターン。HPが多い方が勝者。

## 7.2 カード種別と属性
| 種類 | 効果 | 例 |
|------|------|----|
| 攻撃（物理） | 物理ダメージを与える、STRが補正 | 闇剣, 重斬 |
| 攻撃（魔法） | 魔法ダメージを与える、INTが補正 | 火球, 氷槍 |
| 防御 | 次の被ダメージ軽減 | 霧の盾 |
| 回復 | HPを回復 | 迅速回復 |
| 補助 | ATK/DEF上昇 | 激励, 硬化 |
| 特殊 | 特定効果を発動 | 吸血, 号令 |

## 7.3 戦闘計算式
- **物理攻撃ダメージ**：`D = (card.power + ATK + STR) - enemy.DEF`
  - 物理攻撃カード使用時：STRが補正として加算される
  - 最低ダメージ：1
- **魔法攻撃ダメージ**：`D = (card.power + ATK + INT) - enemy.DEF`
  - 魔法攻撃カード使用時：INTが補正として加算される
  - 最低ダメージ：1
- **回復量**：`H = card.power + INT * 0.5`
  - 上限：最大HPまで
- **ダメージ軽減**：`DEFbuff = card.power`（ターン終了でリセット）
- **特殊効果**：
  - 号令：次の攻撃カードの威力+50%
  - 回避機構：次の1回の敵攻撃を完全回避
  - 吸血：ダメージを与えた分の50%を回復
  - 連撃：2回攻撃
  - 反射：受けたダメージの30%を敵に返す
  - 毒刃：3ターン間毎ターン3ダメージ（累積可能）
  - 瞬殺：敵HP50%以下の時、威力+5
  - 再生の祝福：即時回復+次のターン自動回復5

## 7.4 勝利報酬
- **通常バトル（出撃）**：
  - EXP：敵ごとに固定（新人冒険者：25、魔導士セラ：30、銀騎士隊長：35、狂戦士バルガ：40、勇者アルト：50）
  - 新カード5種追加（未所持のカードからランダム最大5種をコレクションに追加）
  - HP引き継ぎ：バトル終了時のHPが拠点HPに引き継がれる
- **訓練バトル（訓練）**：
  - EXP：雑魚敵を倒すと15EXPを獲得
  - カード追加：なし
  - HP回復：なし（バトル前のHPのまま）
- **共通**：
  - LVアップ時：HP/ATK/DEF上昇、自動反映

## 7.5 スコアシステム（加算・消費・ボーナス）

- 目的：ストーリー敵を「弱いカード」で攻略するほど高得点。訓練・鍛錬はスコア消費のリソース管理要素とする。

### 7.5.1 基本仕様
- 用語：スコア（Score）
- 初期値：0／上限：9,999／下限：0（消費時に0未満にはならない）
- 表示箇所：拠点画面ステータス（Score）、リザルトに今回獲得スコアを表示
- 保存：なし（敗北リセットでスコアも0に戻る）

### 7.5.2 加算（通常バトル勝利時のみ）
- ベーススコア（敵ごと）：
  - 新人冒険者：50
  - 魔導士セラ：80
  - 銀騎士隊長：110
  - 狂戦士バルガ：140
  - 勇者アルト：200
- ボーナス加点：
  - 残HPボーナス：`round(ベース × 残HP割合 × 0.3)`
  - ターン短縮ボーナス：`(最大ターン - 使用ターン) × 5`
  - 弱カードボーナス（後述）

### 7.5.3 弱カードボーナス（核心）
- 目的：後半カードを温存し、低火力カード中心で勝つほど加点。
- 手順：
  1) 対戦中に「使用した攻撃/魔法カード」（type=attack かつ attribute が physical/magic）を対象に、`使用平均パワー = mean(card.power)` を算出。対象が1枚未満の場合は「デッキ内の攻撃/魔法カードの平均パワー」を利用。
  2) 敵ランク別の期待基準値 `期待パワー` を設定：新人=10、セラ=12、銀騎士=14、バルガ=16、アルト=18。
  3) 係数 `弱カード係数 = clamp(期待パワー / 使用平均パワー, 1.0, 2.0)`
  4) 追加点 `弱カードボーナス = round(ベース × (弱カード係数 - 1.0))`

### 7.5.4 消費（訓練・鍛錬）
- 訓練開始時：スコア -5（スコア不足の場合は開始不可）
- 鍛錬1回（STR+1 または INT+1）：スコア -3 ＋ 既存の EXP -2（いずれか不足で実行不可）

### 7.5.5 実装メモ
- データ：`gameData.score` を追加。最小0、最大9,999でクリップ。
- UI：拠点の統計/ステータスに `Score` 表示、リザルトに `+獲得スコア` 表示。
- 算出：`victory()` 内でベース・各種ボーナスを加算。訓練/鍛錬操作時に減算。

---
# 8. 敵（CPU）

## 8.1 通常バトルの敵（出撃）
| 名前 | HP | ATK | DEF | 備考 |
|------|----|-----|-----|------|
| 新人冒険者 | 60 | 8 | 1 | 初期戦（EXP：25） |
| 魔導士セラ | 80 | 10 | 2 | 中盤（EXP：30） |
| 銀騎士隊長 | 100 | 12 | 3 | 難戦（EXP：35） |
| 狂戦士バルガ | 120 | 14 | 3 | 終盤前（EXP：40） |
| 勇者アルト | 150 | 16 | 4 | 章ボス（EXP：50） |

## 8.2 訓練バトルの敵
| 名前 | HP | ATK | DEF | 備考 |
|------|----|-----|-----|------|
| 雑魚敵 | 40 | 5 | 1 | 訓練用（EXP：15、カード追加なし） |

AIロジック（全敵共通）：  
- HP < 30% → 回復優先  
- HP > 70% → 攻撃優先  
- ランダム確率でバフ行動  

---
# 9. デッキ構築

- **初期デッキ**：10枚（固定）  
- **カード追加**：バトル勝利報酬で1枚ランダム獲得（所持カードプールに追加）。  
- **デッキ編集**：
  - デッキ枚数：10枚固定（最小10枚、最大10枚）
  - 所持カードプールから選択して追加
  - デッキからカードを削除可能（但し10枚未満にはできない）
  - 同じカードを複数枚デッキに入れられる（実装に依存）  

---
# 10. UI構成

### 10.1 拠点画面
- ステータスパネル（左）：LV, EXP, HP, ATK, DEF, STR, INT, Score。
- 統計パネル（右）：勝利数、デッキ枚数、所持カード数。
- ボタン群（右）：「訓練」「鍛錬」「デッキ編集」「出撃」。

### 10.2 バトル画面
- **上パネル**：敵情報（名前 / HP / ATK / DEF）
- **中央パネル**：
  - 少年のHPバーとステータス表示（HP / ATK / DEF / STR / INT）
  - ターン数表示（現在ターン / 最大ターン）
  - 戦闘ログエリア（スクロール可能）
- **下パネル**：
  - 手札カードエリア（最大5枚、カードボタンとして表示）
    - 各カードボタン：カード名、種類、パワー、効果が表示される
    - クリック/タップでカードを使用
    - 使用済みカードはグレーアウト表示
    - カード使用後、自動的に敵のターンに移行
- **その他のUI要素**：
  - カード詳細表示：カードにホバー（PC）または長押し（スマホ）で詳細表示
  - HPバー：リアルタイムでHP減少アニメーション表示
  - ターン表示：現在のターン数を強調表示
  - 音楽：BGMとして「運命のカード.mp3」を再生（ループ）

### 10.3 リザルト画面
- 勝敗表示、EXP/Score変動、次戦案内ボタン（章ボス時はエンディングへ）

---
# 11. カードデータ（全30枚）

| ID  | 名前    | 種類  | 属性  | 効果                 | パワー |
| --- | ----- | --- | --- | ------------------ | --- |
| c01 | 闇剣    | 攻撃  | 物理  | 8ダメージ              | 8   |
| c02 | 火球    | 攻撃  | 魔法  | 10魔法ダメージ           | 10  |
| c03 | 霧の盾   | 防御  | -   | 被ダメ軽減6             | 6   |
| c04 | 迅速回復  | 回復  | -   | HP12回復             | 12  |
| c05 | 激励    | 補助  | -   | ATK+2              | 2   |
| c06 | 重斬    | 攻撃  | 物理  | 14ダメージ             | 14  |
| c07 | 硬化    | 補助  | -   | DEF+3              | 3   |
| c08 | 吸血    | 特殊  | 物理  | 6ダメ＋回復3            | 6   |
| c09 | 号令    | 特殊  | -   | 次攻撃+50%            | 0   |
| c10 | 回避機構  | 防御  | -   | 攻撃を1回無効化           | 0   |
| c11 | 連撃    | 攻撃  | 物理  | 12ダメージ×2回          | 12  |
| c12 | 氷槍    | 攻撃  | 魔法  | 9ダメージ（DEF無視20%）    | 9   |
| c13 | 完全防御  | 防御  | -   | 被ダメ軽減10            | 10  |
| c14 | 大回復   | 回復  | -   | HP20回復             | 20  |
| c15 | 魔力集中  | 補助  | -   | INT+3（回復強化）        | 3   |
| c16 | バーサーク | 補助  | -   | ATK+5、DEF-2        | 5   |
| c17 | 反射    | 特殊  | -   | 受けたダメージを30%返す      | 0   |
| c18 | 毒刃    | 特殊  | 物理  | 8ダメ＋毎ターン3ダメ（3ターン）  | 8   |
| c19 | 瞬殺    | 攻撃  | 物理  | 16ダメージ（HP50%以下で+5） | 18  |
| c20 | 再生の祝福 | 回復  | -   | HP15回復＋次のターン5回復    | 15  |
| c21 | 雷撃    | 攻撃  | 魔法  | 13魔法ダメージ           | 13  |
| c22 | 強斬    | 攻撃  | 物理  | 18ダメージ             | 18  |
| c23 | 鉄壁    | 防御  | -   | 被ダメ軽減12            | 12  |
| c24 | 治癒    | 回復  | -   | HP22回復             | 22  |
| c25 | 衝波    | 攻撃  | 魔法  | 15魔法ダメージ           | 15  |
| c26 | 剛打    | 攻撃  | 物理  | 19ダメージ             | 19  |
| c27 | 堅守    | 防御  | -   | 被ダメ軽減13            | 13  |
| c28 | 癒光    | 回復  | -   | HP24回復             | 24  |
| c29 | 烈火    | 攻撃  | 魔法  | 17魔法ダメージ           | 17  |
| c30 | 断罪    | 攻撃  | 物理  | 20ダメージ             | 20  |

**属性について**：
- **物理**：STRが補正として加算される
- **魔法**：INTが補正として加算される
- **-**：属性なし（防御、回復、補助、一部の特殊）

---
# 12. 技術仕様

- 描画：DOM操作のみ（Canvas不要）  
- フレームレート：60fps（CSSアニメーションで演出）  
- 保存機能：なし（敗北時にゲームリセット）  
- ファイル構成：
  ```
  index.html
  css/style.css
  js/game.js
  js/battle.js
  js/player.js
  js/cards.js
  music/
    - 運命のカード.mp3（タイトル画面・拠点画面BGM）
    - 魔王の継承者.mp3（拠点画面・メニュー画面BGM候補）
    - 新人冒険者.mp3（新人冒険者戦BGM）
    - 魔導士セラと銀騎士隊長.mp3（魔導士セラ・銀騎士隊長戦BGM）
    - 狂戦士バルガ.mp3（狂戦士バルガ戦BGM）
    - 勇者アルト（章ボス）.mp3（勇者アルト戦BGM）
  picture/
    - 1_Rookie Adventurer.png（新人冒険者キャラクター画像）
    - 2_Sera the Mage.png（魔導士セラキャラクター画像）
    - 3_Silver Knight Captain.png（銀騎士隊長キャラクター画像）
    - 4_Berserker Varga.png（狂戦士バルガキャラクター画像）
    - 5_Brave Alto.png（勇者アルトキャラクター画像）
    - 6_Weak Enemy (Training).png（雑魚敵キャラクター画像）
    - 8_Young Boy (Leon).png（少年レオンキャラクター画像）
    - 9_Attack Icon.png（攻撃カードアイコン）
    - 10_Defense Icon.png（防御カードアイコン）
    - 11_Recovery Icon.png（回復カードアイコン）
    - 12_Special Icon.png（特殊カードアイコン）
    - 13_Damage Display Effect.png（ダメージ表示エフェクト）
    - 14_Recovery Effect.png（回復エフェクト）
    - 15_Buff Display.png（バフ表示エフェクト）
    - 16_Debuff Display.png（デバフ表示エフェクト）
    - 17_Card Use Effect.png（カード使用エフェクト）
  ```

---
# 12.1 画像イメージ（必要な画像）

## 12.1.1 UI要素

### 背景画像
- **拠点画面背景**
  - スタイル：ファンタジー風の魔王の城・拠点
  - 色調：暗めの紫・黒を基調、魔力的な雰囲気
  - 雰囲気：落ち着いた、安心感のある場所
  - AI生成プロンプト例：「fantasy dark castle interior, purple and black theme, magical atmosphere, cozy base, game UI background, 2D game art style」

- **バトル画面背景**
  - スタイル：戦場・バトルフィールド
  - 色調：暗めの赤・紫、緊張感のある雰囲気
  - 雰囲気：戦闘中の緊張感
  - AI生成プロンプト例：「battlefield background, dark fantasy setting, purple and red tones, combat arena, 2D game battle scene」

### ボタン画像（任意）
- スタイル：ゲームUI風の装飾ボタン
- 色調：紫・ピンクを基調

## 12.1.2 キャラクター画像（AI生成用詳細仕様）

### 少年（レオン）
- **基本情報**：
  - 年齢：10〜12歳
  - 外見：黒髪または茶髪の短髪、普通の体格の少年
  - 服装：簡素な冒険者風の服、または魔王が用意した戦闘服
  - 表情：決意に満ちた、やや不安げな表情
- **スタイル**：アニメ風、カジュアルな戦闘装備
- **AI生成プロンプト例**：
  - 「young boy character, 10-12 years old, black or brown short hair, determined expression, simple adventurer outfit or combat clothes, fantasy RPG character, anime style, game character portrait, front view, clean background」

### 新人冒険者
- **基本情報**：
  - 外見：初心者冒険者、基本的な装備
  - 服装：革の防具、基本的な剣
  - 表情：やや不安、初心者らしさ
- **スタイル**：アニメ風、弱めの敵
- **AI生成プロンプト例**：
  - 「beginner adventurer character, young male, basic leather armor, simple sword, nervous expression, weak enemy design, fantasy RPG, anime style, game character, front view」

### 魔導士セラ
- **基本情報**：
  - 性別：女性
  - 外見：魔法使いのローブ、魔法の杖
  - 服装：紫色または青色の魔法使いのローブ、フード付き
  - 表情：冷静、魔導士らしい知的な雰囲気
- **スタイル**：アニメ風、中級の敵
- **AI生成プロンプト例**：
  - 「female mage character, purple or blue wizard robe with hood, magic staff, intelligent calm expression, fantasy RPG mage, anime style, game character portrait, front view」

### 銀騎士隊長
- **基本情報**：
  - 外見：銀色の重装鎧、剣と盾
  - 服装：銀色の騎士鎧、赤や青のマント
  - 表情：厳格、隊長らしい威厳
- **スタイル**：アニメ風、重装備の強敵
- **AI生成プロンプト例**：
  - 「silver knight captain, heavy silver armor, sword and shield, red or blue cape, stern commanding expression, fantasy RPG knight, anime style, game character portrait, front view」

### 狂戦士バルガ
- **基本情報**：
  - 外見：大柄な戦士、獣のような狂気
  - 服装：破れた鎧、大きな斧や大剣
  - 表情：狂気、戦闘狂らしい凶暴な表情
  - 特徴：筋肉質、戦闘で傷ついた装備
- **スタイル**：アニメ風、強敵、狂戦士らしさ
- **AI生成プロンプト例**：
  - 「berserker warrior character, large muscular build, tattered armor, large axe or greatsword, wild berserker expression, battle-scarred, fantasy RPG berserker, anime style, game character portrait, front view」

### 勇者アルト（章ボス）
- **基本情報**：
  - 外見：伝説の勇者、光る剣、輝く装備
  - 服装：白や金色の光る装備、聖なる鎧
  - 表情：英雄的な、決意に満ちた表情
  - 特徴：ボスらしい威厳と迫力
- **スタイル**：アニメ風、最終ボス、英雄らしさ
- **AI生成プロンプト例**：
  - 「hero character, legendary hero, white or golden shining armor, glowing holy sword, heroic determined expression, boss character design, fantasy RPG hero, anime style, game character portrait, front view, impressive presence」

### 雑魚敵（訓練用）
- **基本情報**：
  - 外見：弱そうなモンスターまたはゴブリン
  - 服装：簡素な装備、ぼろぼろ
  - 表情：弱々しい、雑魚らしい表情
- **スタイル**：アニメ風、弱い敵、訓練用
- **AI生成プロンプト例**：
  - 「weak goblin or weak monster character, simple tattered equipment, weak fearful expression, training enemy, fantasy RPG weak enemy, anime style, game character, front view」

## 12.1.3 カード画像（AI生成用詳細仕様）

### カード背景
- **基本デザイン**：魔法カード風のデザイン
- **色調**：紫・黒を基調、魔力的な雰囲気
- **枠**：装飾的な縁取り、魔法の紋様
- **AI生成プロンプト例**：
  - 「fantasy magic card design, purple and black theme, decorative frame, magical patterns, card game UI, 2D game card art, clean card background」

### カード種別アイコン
- **攻撃アイコン**：剣や炎のアイコン、赤・オレンジ系
- **防御アイコン**：盾のアイコン、青・水色系
- **回復アイコン**：ハートや光のアイコン、緑・ピンク系
- **補助アイコン**：星や矢印のアイコン、黄色・金色系
- **特殊アイコン**：魔法陣や特殊な記号、紫系
- **AI生成プロンプト例（攻撃）**：
  - 「sword or fire icon, red and orange colors, attack symbol, game UI icon, simple clean design, 64x64 pixels」

## 12.1.4 エフェクト（AI生成用詳細仕様）

### ダメージ表示エフェクト
- **基本情報**：
  - 種類：数字エフェクト、ダメージ爆発
  - 色：赤・オレンジ、激しい爆発感
  - 形状：数字とともに爆発するエフェクト
- **用途**：HP減少時に表示
- **AI生成プロンプト例**：
  - 「damage number effect, red and orange explosion particles, game damage text effect, fire particles, 2D game effect, transparent background」

### 回復エフェクト
- **基本情報**：
  - 種類：光る粒子、回復のオーラ
  - 色：緑・白、優しい光
  - 形状：上向きに流れる光の粒子
- **用途**：HP回復時に表示
- **AI生成プロンプト例**：
  - 「healing effect, green and white light particles, upward flowing particles, game healing effect, 2D game effect, transparent background」

### バフ/デバフ表示
- **基本情報**：
  - 種類：矢印上（バフ）、矢印下（デバフ）
  - 色：金色・緑（バフ）、灰色・赤（デバフ）
  - 形状：シンプルなアイコン、魔法のオーラ
- **用途**：ステータス変化時に表示
- **AI生成プロンプト例（バフ）**：
  - 「buff effect icon, upward arrow, golden or green glow, game buff symbol, 2D game UI icon, simple design」

### カード使用エフェクト
- **基本情報**：
  - 種類：カード発動時の光、魔法陣
  - 色：カード種別に応じた色
  - 形状：円形の魔法陣、光の拡散
- **AI生成プロンプト例**：
  - 「card activation effect, magical circle, light burst, purple and blue glow, fantasy game effect, 2D animation frame, transparent background」

## 12.1.5 画像生成時の共通仕様

### 推奨スタイル
- **アートスタイル**：アニメ風、2Dゲーム風、ファンタジーRPG風
- **解像度**：キャラクター：512x512px、アイコン：64x64px、エフェクト：256x256px（用途に応じて）
- **背景**：透明背景（PNG形式）を推奨
- **色調**：ゲームのダークファンタジー風に統一（紫・黒・赤を基調）

### 画像生成AIへの指示例
1. **キャラクター**：「fantasy RPG character, anime style, front view portrait, clean background, game character design」
2. **アイコン**：「game UI icon, simple clean design, transparent background」
3. **エフェクト**：「game effect, particle animation frame, transparent background, 2D game art」

**注意**：現在の実装では絵文字とCSSでUIを構築しているため、画像は任意です。将来的な拡張として用意する。

## 12.1.6 実際に用意された画像ファイル

以下の画像ファイルが`picture/`フォルダに用意されています：

### キャラクター画像
- `1_Rookie Adventurer.png`：新人冒険者
- `2_Sera the Mage.png`：魔導士セラ
- `3_Silver Knight Captain.png`：銀騎士隊長
- `4_Berserker Varga.png`：狂戦士バルガ
- `5_Brave Alto.png`：勇者アルト（章ボス）
- `6_Weak Enemy (Training).png`：雑魚敵（訓練用）
- `8_Young Boy (Leon).png`：少年レオン

### カード種別アイコン
- `9_Attack Icon.png`：攻撃カードアイコン
- `10_Defense Icon.png`：防御カードアイコン
- `11_Recovery Icon.png`：回復カードアイコン
- `12_Special Icon.png`：特殊カードアイコン

### エフェクト画像
- `13_Damage Display Effect.png`：ダメージ表示エフェクト
- `14_Recovery Effect.png`：回復エフェクト
- `15_Buff Display.png`：バフ表示エフェクト
- `16_Debuff Display.png`：デバフ表示エフェクト
- `17_Card Use Effect.png`：カード使用エフェクト

---

## 12.2 BGM・効果音

### 12.2.1 BGMファイル

以下のBGMファイルが`music/`フォルダに用意されています：

- **`運命のカード.mp3`**
  - 用途：タイトル画面・拠点画面のメインBGM
  - 再生方法：ループ再生

- **`魔王の継承者.mp3`**
  - 用途：拠点画面・メニュー画面のBGM候補
  - 再生方法：ループ再生（実装による）

- **`新人冒険者.mp3`**
  - 用途：新人冒険者戦のバトルBGM
  - 再生タイミング：新人冒険者とのバトル開始時

- **`魔導士セラと銀騎士隊長.mp3`**
  - 用途：魔導士セラ戦・銀騎士隊長戦のバトルBGM
  - 再生タイミング：魔導士セラまたは銀騎士隊長とのバトル開始時

- **`狂戦士バルガ.mp3`**
  - 用途：狂戦士バルガ戦のバトルBGM
  - 再生タイミング：狂戦士バルガとのバトル開始時

- **`勇者アルト（章ボス）.mp3`**
  - 用途：勇者アルト（章ボス）戦のバトルBGM
  - 再生タイミング：勇者アルトとのバトル開始時

### 12.2.2 BGM実装の推奨事項
- バトル開始時に敵に応じたBGMに切り替え
- バトル終了後、拠点画面に戻る際にメインBGMに戻す
- 音量は0.5（50%）を推奨（調整可能に）

---
# 13. 今後の拡張案
- 難易度モード（Easy / Normal / Hard）
- カード進化（Lv制）
- 追加ボス（魔王戦・覚醒少年）

---
# 14. 面白さのポイント
- 少年一人の戦いを"支援カード"で操る構成。  
- 戦略性とテンポの良さを両立した10ターン制。  
- デッキ構築と少年育成のバランスを楽しむ。

---
# 15. 整合性チェックと修正履歴

## 15.1 修正した整合性の問題
1. **訓練システムの変更**
   - 旧：EXP -2 消費で STR/INT成長 → 新：雑魚敵と戦ってEXPだけ獲得するモードに変更
   - 鍛錬を新設：EXP -2 消費で STR/INT成長

2. **レベルアップ条件のバランス調整**
   - 旧：必要EXP = LV × 100（LV1→2は100） → 新：必要EXP = LV × 50（LV1→2は50）
   - 初期EXP表示も 0/100 → 0/50 に変更

3. **休息機能の削除**
   - 休息ボタンと機能を削除

4. **STR/INTの扱い変更**
   - 旧：全攻撃カードでSTRが補正 → 新：物理攻撃カードはSTR、魔法攻撃カードはINTが補正
   - カードに物理/魔法属性を追加

5. **EXP獲得量の明確化**
   - 旧：+20〜30（範囲） → 新：敵ごとに固定値（25/30/35/50、雑魚敵15）

6. **初期ステータスの追加**
   - 定義がなかったため、実装値を反映して追加

7. **章ボスの定義**
   - 勇者アルトを章ボスとして明記

8. **TRUSTシステムの削除**
   - TRUST（信頼度）システムを仕様から削除

9. **セーブ機能の削除**
   - localStorageによる保存機能を削除

10. **敗北時の処理変更**
    - 旧：HP半減して拠点へ戻る → 新：ゲームを最初のスタートにリセット

11. **ターン制の変更**
    - 旧：5ターン制 → 新：10ターン制

12. **鍛錬機能の改善**
    - モーダルを閉じずに連続で強化可能に変更

13. **デッキ編集の改善**
    - 完了時に10枚であることを確認する機能を追加

14. **BGM追加**
    - 「運命のカード.mp3」をBGMとして追加（ループ再生）

15. **画像イメージ仕様の追加**
    - 必要な画像イメージのリストを追加（任意）

16. **実ファイルの追加**
    - `music/`フォルダに6つのBGMファイルを追加
    - `picture/`フォルダに17つの画像ファイルを追加（キャラクター、アイコン、エフェクト）
    - ファイル構成セクション（12）に実ファイル一覧を追加
    - 実際に用意された画像ファイルの一覧を追加（12.1.6）
    - BGMファイルの詳細仕様を追加（12.2）

## 15.2 追加した要素
1. **初期ステータス（6.1）**
   - 全てのパラメータの初期値を明記

2. **戦闘計算式の詳細化（7.3）**
   - 特殊効果の詳細説明

3. **カードデータを10枚→20枚に拡張（11）**
   - 10枚の新規カードを追加（c11〜c20）

4. **デッキ編集ルールの詳細化（9）**
   - 枚数制限、編集方法の詳細

5. **バトルルールの詳細化（4.3）**
   - 手札ドローの仕様、ターン終了時の処理

6. **勝利報酬の詳細化（7.4）**
   - EXP、カード追加の詳細

## 15.3 実装との整合性確認
- ✅ パラメータ名と成長方法の一致
- ✅ カード効果と計算式の整合性
- ✅ UI構成と実装の一致
- ✅ 敵データとEXP報酬の一致
- ✅ バトルフローと仕様の一致

---
# 16. ファイル保存情報
この仕様書は以下のパスに保存されています：  
**魔王の街づくりと子育て/魔王の子育て_少年決戦録_v4.md**

